<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>kTAMV Server Steuerung</title>
</head>
<body style="font-family: Arial, sans-serif; text-align: center; margin-top: 50px;">

    <h1>kTAMV Server Steuerung</h1>

    <button onclick="postCommand('/start_preview')">Start Preview</button>
    <button onclick="postCommand('/stop_preview')">Stop Preview</button>
    <br><br>

    <button onclick="postCommand('/find_nozzle_center')">Nozzle zentrieren</button>
    <br><br>

    <button onclick="postCommand('/set_origin')">Origin setzen</button>
    <br><br>

    <button onclick="getOffset()">Offset abrufen</button>
    <p id="offsetDisplay"></p>

    <script>
        async function postCommand(endpoint) {
            try {
                const response = await fetch(endpoint, { method: 'POST' });
                const data = await response.json();
                alert(JSON.stringify(data));
            } catch (error) {
                alert('Fehler: ' + error);
            }
        }

        async function getOffset() {
            try {
                const response = await fetch('/get_offset');
                const data = await response.json();
                document.getElementById('offsetDisplay').innerText = 
                    'X-Offset: ' + data.x_offset.toFixed(3) + ' | Y-Offset: ' + data.y_offset.toFixed(3);
            } catch (error) {
                alert('Fehler beim Abrufen des Offsets: ' + error);
            }
        }
    </script>

</body>
</html>
